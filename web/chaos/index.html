<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chaos System Analysis</title>
    <link rel="stylesheet" href="../styles.css" />
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <nav class="top-nav">
      <div class="nav-container">
        <a class="nav-link" href="../index.html">Beranda</a>
        <a class="nav-link active" href="#">Chaos Visualizer</a>
      </div>
    </nav>

    <header class="hero">
      <h1>Chaos System Analytics</h1>
      <p>
        Eksplorasi visual sistem dinamik non-linear dengan perbandingan metode
        RK4 vs RK5 secara real-time.
      </p>

      <div class="controls-bar glass-panel">
        <select id="systemSelect">
          <option value="Lorenz">Lorenz System</option>
          <option value="Chen">Chen System</option>
          <option value="Rossler">Rossler System</option>
        </select>

        <button id="openModalBtn" class="btn">
          <span>Kustom Parameter</span>
        </button>

        <button id="regenerateBtn" class="btn btn--primary">
          Simulasi Ulang
        </button>
      </div>

      <div
        id="statusMsg"
        style="
          margin-top: 1rem;
          color: var(--text-secondary);
          font-size: 0.85rem;
        "
      >
        Siap melakukan komputasi.
      </div>
    </header>

    <main class="main-content">
      <div class="dashboard-grid">
        <div class="chart-card glass-panel grid-col-8">
          <div class="chart-header">
            <span class="chart-title">3D Trajectory Visualization</span>
            <span class="hero__tag" style="margin: 0; font-size: 0.6rem"
              >Interactive</span
            >
          </div>
          <div id="plot3d" class="plot-area" style="height: 550px"></div>
        </div>

        <div class="chart-card glass-panel grid-col-4">
          <div class="chart-header">
            <span class="chart-title">Time Series</span>
          </div>
          <div
            id="plotTimeSeries"
            class="plot-area"
            style="height: 550px"
          ></div>
        </div>

        <div class="chart-card glass-panel grid-full">
          <div class="chart-header">
            <span class="chart-title">Phase Portraits (2D Projections)</span>
          </div>
          <div class="phase-grid">
            <div id="phaseXY" class="plot-area" style="height: 300px"></div>
            <div id="phaseYZ" class="plot-area" style="height: 300px"></div>
            <div id="phaseXZ" class="plot-area" style="height: 300px"></div>
          </div>
        </div>

        <div class="chart-card glass-panel grid-full">
          <div class="chart-header">
            <span class="chart-title">Error Analysis (RK4 vs RK5)</span>
          </div>
          <div id="plotError" class="plot-area" style="height: 400px"></div>
        </div>
      </div>
    </main>

    <div id="paramModal" class="modal-overlay">
      <div class="modal-glass">
        <div class="modal-header">
          <h3>Konfigurasi Parameter</h3>
          <button class="close-modal-btn close-modal">&times;</button>
        </div>

        <form id="customForm">
          <h4
            id="modalSystemName"
            style="color: var(--accent-glow); margin-bottom: 1rem"
          >
            Lorenz System
          </h4>

          <div class="input-group">
            <label>Koefisien Sistem</label>
            <div class="input-row">
              <div>
                <label id="labelP1" style="font-size: 0.7rem">Sigma</label>
                <input
                  type="number"
                  id="param1"
                  class="glass-input"
                  step="0.01"
                  required
                />
              </div>
              <div>
                <label id="labelP2" style="font-size: 0.7rem">Rho</label>
                <input
                  type="number"
                  id="param2"
                  class="glass-input"
                  step="0.01"
                  required
                />
              </div>
              <div>
                <label id="labelP3" style="font-size: 0.7rem">Beta</label>
                <input
                  type="number"
                  id="param3"
                  class="glass-input"
                  step="0.01"
                  required
                />
              </div>
            </div>
          </div>

          <div class="input-group">
            <label>Kondisi Awal (x0, y0, z0)</label>
            <div class="input-row">
              <input
                type="number"
                id="initX"
                class="glass-input"
                step="0.1"
                value="1.0"
              />
              <input
                type="number"
                id="initY"
                class="glass-input"
                step="0.1"
                value="1.0"
              />
              <input
                type="number"
                id="initZ"
                class="glass-input"
                step="0.1"
                value="1.0"
              />
            </div>
          </div>

          <div class="input-group">
            <div class="input-row" style="grid-template-columns: 1fr 1fr">
              <div>
                <label>Durasi</label>
                <input
                  type="number"
                  id="duration"
                  class="glass-input"
                  value="50"
                />
              </div>
              <div>
                <label>Step Size (h)</label>
                <input
                  type="number"
                  id="stepSize"
                  class="glass-input"
                  value="0.01"
                  step="0.001"
                />
              </div>
            </div>
          </div>

          <div class="modal-actions">
            <button type="button" id="resetDefaultBtn" class="btn btn-block">
              Reset Default
            </button>
            <button type="submit" class="btn btn--primary btn-block">
              Mulai Simulasi
            </button>
          </div>
        </form>
      </div>
    </div>

    <footer class="footer">
      <p>&copy; 2025 Chaos System - Kelompok 2 Research Group</p>
    </footer>

    <script>
      const modal = document.getElementById("paramModal");
      const btn = document.getElementById("openModalBtn");
      const span = document.getElementsByClassName("close-modal")[0];

      btn.onclick = function () {
        modal.classList.add("active");
        document.body.style.overflow = "hidden";
      };

      span.onclick = function () {
        modal.classList.remove("active");
        document.body.style.overflow = "auto";
      };

      window.onclick = function (event) {
        if (event.target == modal) {
          modal.classList.remove("active");
          document.body.style.overflow = "auto";
        }
      };
    </script>
    <script src="chaos.js"></script>
  </body>
</html>
